<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
					function OptanonWrapper() { }
				</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual:  The Visual Tree</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://docs.unity3d.com/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1639761219"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1639761219"></script><script type="text/javascript" src="docdata/toc.js?ts=1639761219"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1639761219"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1639761219">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2020.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-VisualTree.html">English</a></li>
<li><a href="/cn/current/Manual/UIE-VisualTree.html">中文</a></li>
<li><a href="/ja/current/Manual/UIE-VisualTree.html">日本語</a></li>
<li><a href="/es/current/Manual/UIE-VisualTree.html">Español</a></li>
<li><a href="/kr/current/Manual/UIE-VisualTree.html">한국어</a></li>
<li><a href="/ru/current/Manual/UIE-VisualTree.html">Русский</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2020.3</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-VisualTree.html">English</a></li>
<li><a href="/cn/current/Manual/UIE-VisualTree.html">中文</a></li>
<li><a href="/ja/current/Manual/UIE-VisualTree.html">日本語</a></li>
<li><a href="/es/current/Manual/UIE-VisualTree.html">Español</a></li>
<li><a href="/kr/current/Manual/UIE-VisualTree.html">한국어</a></li>
<li><a href="/ru/current/Manual/UIE-VisualTree.html">Русский</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html"> Unity User Manual 2020.3 (LTS)</a></li>
<li><a href="UIToolkits.html"> Creating user interfaces (UI)</a></li>
<li><a href="UIElements.html"> UI Toolkit</a></li>
<li> The Visual Tree</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-UITK-package.html"></a></span><div class="tip"> Accessing UI Toolkit </div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-LayoutEngine.html"></a></span><div class="tip"> The Layout Engine</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>The Visual Tree</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>The most basic building block in <span class="tooltip"><strong>UI</strong><span class="tooltiptext">(User Interface) Allows a user to interact with your application. <a class="tooltipMoreInfoLink" href="https://docs.unity3d.com/Packages/com.unity.ugui@latest?subfolder=/manual/index.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#UI">Glossary</a></span></span></span> Toolkit is a visual element. The visual elements are ordered into a hierarchy tree with parent-child relationships. The diagram below displays a simplified example of the hierarchy tree, and the rendered result in UI Toolkit.</p>

<figure>
<img src="../uploads/Main/VisualTreeExample.png" alt="Simplified hierarchy of the visual tree">
<figcaption>Simplified hierarchy of the visual tree</figcaption>
</figure>

<h2>Visual elements</h2>

<p>The <a href="../ScriptReference/UIElements.VisualElement.html">VisualElement</a> class is the base for all nodes in the visual tree. The <code>VisualElement</code> base class contains common properties for all controls, such as styles, layout data, and event handlers. Visual elements can have children and descendant visual elements. For example, in the diagram above, the first <code>Box</code> visual element has three child visual elements: <code>Label</code>, <code>Checkbox</code>, and <code>Slider</code>.</p>

<p>You can customize the appearance of visual elements through stylesheets. You can also use event callbacks to modify the behavior of a visual element.</p>

<p>
<code>VisualElement</code> derives into subclasses that define additional behavior and functionality, such as controls. UI Toolkit includes a variety of built-in controls with specialized behavior. For example, the following items are available as built-in controls:</p>

<ul>
<li>Buttons</li>
<li>Toggles</li>
<li>Text input fields</li>
</ul>

<p>You can also combine visual elements together and modify their behavior to create custom controls. For a list of built-in controls, see the <a href="UIE-Controls-Reference.html">Control reference</a> page.</p>

<h2>Panels</h2>

<p>The panel is the parent object of the visual tree. A visual tree must connect to a panel for the visual elements inside a tree to render. All panels belong to a window, such as an Editor Window. The panel also handles focus control and the event dispatching for the visual tree.</p>

<p>Every element in a visual tree holds a direct reference to the panel that holds the visual tree. To verify the connection of a <code>VisualElement</code> to a panel, you can test the <code>panel</code> property of this element. When the visual element isn’t connected, the test returns <code>null</code>.</p>

<h2>Draw order</h2>

<p>The draw order of elements in the visual tree follows a depth-first search. Child visual elements appear on top of parent elements. Child elements are also drawn in the order of the sibling list. The draw order is the following:</p>

<ol>
<li>The top visual element.</li>
<li>The first child element of that visual element.</li>
<li>The child elements of the descendant element.</li>
</ol>

<p>The diagram below shows the draw order of the previous example:</p>

<figure>
<img src="../uploads/Main/UIEDrawingOrder.png" alt="Visual element draw order">
<figcaption>Visual element draw order</figcaption>
</figure>

<p>To change the drawing order of visual elements, use the following functions:</p>

<ul>
<li><a href="../ScriptReference/UIElements.VisualElement.BringToFront.html">BringToFront()</a></li>
<li><a href="../ScriptReference/UIElements.VisualElement.SendToBack.html">SendToBack()</a></li>
</ul>

<p>For sibling visual elements, use the following:</p>

<ul>
<li><a href="../ScriptReference/UIElements.VisualElement.PlaceBehind.html">PlaceBehind()</a></li>
<li><a href="../ScriptReference/UIElements.VisualElement.PlaceInFront.html">PlaceInFront()</a></li>
</ul>

<p><a name="Positioning"></a></p>

<h2>Coordinate and position systems</h2>

<p>UI Toolkit uses a powerful layout system that automatically calculates the position and size of individual elements based on the layout parameters in their style properties. For more information, see the <a href="UIE-LayoutEngine.html">Layout Engine page</a>.</p>

<p>UI Toolkit has two types of coordinates:</p>

<ul>
<li>
<strong>Relative</strong>: Coordinates relative to the element’s calculated position. The layout system calculates the position of the element, then adds the coordinates as an offset. Child elements can influence the position of the parent element, since the layout engine takes them into account when calculating element position.</li>
<li>
<strong>Absolute</strong>: Coordinates relative to the parent element. This circumvents the automatic layout calculation and directly sets the position of the element. Child elements under the same parent have no influence on the element’s position. Similarly, the element doesn’t influence the position and size of other siblings under the same parent.</li>
</ul>

<p>Each visual element determines the coordinate system used to calculate its position. You can configure which coordinate system to use in the element style sheet.</p>

<p>The following code shows how to set the coordinate space and the position of a visual element through code:</p>

<pre><code class="lang-csharp">    var newElement = new VisualElement();
    newElement.style.position = Position.Relative;
    newElement.style.left = 15;
    newElement.style.top = 35;
</code></pre>

<p>The origin of an element is its top left corner.</p>

<p>The layout system computes the <code>VisualElement.layout</code>property (type <code>Rect</code>) for each element, which includes the final position of the element. This takes the relative or absolute position of the element into account. </p>

<p>The <code>layout.position</code> is expressed in points, relative to the coordinate space of its parent. </p>

<p>Each <code>VisualElement</code> has a transform property (<code>ITransform</code>) you can use to add an additional local offset to the position and rotation of an element. The offset isn’t represented in the calculated layout property. By default, the <code>transform</code> is the identity.</p>

<p>Use the <code>worldBound</code> property to retrieve the final window space coordinates of the <code>VisualElement</code>, taking into account both the layout position and the transform. This position includes the height of the header of the window.</p>

<h3>Example</h3>

<p>The following code sample demonstrates the difference between relative and absolute positioning. It uses the automatic layout system to add boxes to a window and calculate their positions. One box demonstrates a relative offset of <code>25 px</code>, while another box demonstrates the absolute position of <code>25 px, 25 px</code>.</p>

<figure>
<img src="../uploads/Main/UIEcoordinatesExample.png" alt="Visual element positioning">
<figcaption>Visual element positioning</figcaption>
</figure>

<p>To see this example in action, do the following:</p>

<ol>
<li>Under <strong>Assets &gt; Scripts &gt; Editor</strong>, create a C# script called PositioningTestWindow.</li>
<li>Copy the code below into the C# script.</li>
<li>From the Editor Toolbar, select <strong>Window &gt; UI Toolkit &gt; Positioning Test Window</strong>
</li>
</ol>

<pre><code class="lang-csharp">
using UnityEditor;
using UnityEngine;
using UnityEngine.UIElements;

public class PositioningTestWindow : EditorWindow
{
    [MenuItem(&quot;Window/UI Toolkit/Positioning Test Window&quot;)]
    public static void ShowExample()
    {
        var wnd = GetWindow&lt;PositioningTestWindow&gt;();
        wnd.titleContent = new GUIContent(&quot;Positioning Test Window&quot;);
    }

    public void CreateGUI()
    {
        for (int i = 0; i &lt; 2; i++)
        {
            var temp = new VisualElement();
            temp.style.width = 70;
            temp.style.height = 70;
            temp.style.marginBottom = 2;
            temp.style.backgroundColor = Color.gray;
            rootVisualElement.Add(temp);
        }

        // Relative Positioning
        var relative = new Label(&quot;Relative\nPos\n25, 0&quot;);
        relative.style.width = 70;
        relative.style.height = 70;
        relative.style.left = 25;
        relative.style.marginBottom = 2;
        relative.style.backgroundColor = new Color(0.2165094f, 0, 0.254717f);
        rootVisualElement.Add(relative);

        for (int i = 0; i &lt; 2; i++)
        {
            var temp = new VisualElement();
            temp.style.width = 70;
            temp.style.height = 70;
            temp.style.marginBottom = 2;
            temp.style.backgroundColor = Color.gray;
            rootVisualElement.Add(temp);
        }

        // Absolute Positioning
        var absolutePositionElement = new Label(&quot;Absolute\nPos\n25, 25&quot;);
        absolutePositionElement.style.position = Position.Absolute;
        absolutePositionElement.style.top = 25;
        absolutePositionElement.style.left = 25;
        absolutePositionElement.style.width = 70;
        absolutePositionElement.style.height = 70;
        absolutePositionElement.style.backgroundColor = Color.black;
        rootVisualElement.Add(absolutePositionElement);
    }
}

</code></pre>

<h2>Transformation between coordinate systems</h2>

<p>The <code>VisualElement.layout.position</code> and <code>VisualElement.transform</code> properties define how to transform between the local coordinate system and the parent coordinate system.</p>

<p>The <a href="../ScriptReference/UIElements.VisualElementExtensions.html">VisualElementExtensions</a> static class provides the following extension methods that transform points and rectangles between coordinate systems:</p>

<ul>
<li>
<code>WorldToLocal</code> transforms a <code>Vector2</code> or <code>Rect</code> from <code>Panel</code> space to the referential within the element.</li>
<li>
<code>LocalToWorld</code> transforms a <code>Vector2</code> or <code>Rect</code> to <code>Panel</code> space referential.</li>
<li>
<code>ChangeCoordinatesTo</code> transforms <code>Vector2</code> or <code>Rect</code> from the local space of one element to the local space of another.</li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-UITK-package.html"></a></span><div class="tip"> Accessing UI Toolkit </div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-LayoutEngine.html"></a></span><div class="tip"> The Layout Engine</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2021 Unity Technologies. Publication Date: 2021-12-17.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
