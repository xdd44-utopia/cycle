<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
					function OptanonWrapper() { }
				</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual:  Shader loading</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://docs.unity3d.com/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1639761219"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1639761219"></script><script type="text/javascript" src="docdata/toc.js?ts=1639761219"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1639761219"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1639761219">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2020.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/shader-loading.html">English</a></li>
<li><a href="/cn/current/Manual/shader-loading.html">中文</a></li>
<li><a href="/ja/current/Manual/shader-loading.html">日本語</a></li>
<li><a href="/es/current/Manual/shader-loading.html">Español</a></li>
<li><a href="/kr/current/Manual/shader-loading.html">한국어</a></li>
<li><a href="/ru/current/Manual/shader-loading.html">Русский</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2020.3</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/shader-loading.html">English</a></li>
<li><a href="/cn/current/Manual/shader-loading.html">中文</a></li>
<li><a href="/ja/current/Manual/shader-loading.html">日本語</a></li>
<li><a href="/es/current/Manual/shader-loading.html">Español</a></li>
<li><a href="/kr/current/Manual/shader-loading.html">한국어</a></li>
<li><a href="/ru/current/Manual/shader-loading.html">Русский</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html"> Unity User Manual 2020.3 (LTS)</a></li>
<li><a href="Graphics.html">Graphics</a></li>
<li><a href="Shaders.html"> Shaders</a></li>
<li><a href="ShadersOverview.html"> Shaders core concepts</a></li>
<li> Shader loading</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="shader-variant-collections.html"></a></span><div class="tip"> Shader variant collections</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="SL-ShaderReplacement.html"></a></span><div class="tip">Replacing shaders at runtime</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Shader loading</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>By default, Unity’s runtime <span class="tooltip"><strong>shader</strong><span class="tooltiptext">A program that runs on the GPU. <a class="tooltipMoreInfoLink" href="Shaders.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Shader">Glossary</a></span></span></span> loading behavior is:</p>

<ol>
<li>When Unity <a href="scenes-working-with.html">loads a scene</a>, or loads content using <a href="LoadingResourcesatRuntime.html">runtime resource loading</a>, it loads all required <a href="SL-Shader.html">Shader objects</a> into CPU memory.</li>
<li>The first time Unity needs to render geometry using a shader variant, it passes the data for that variant to the graphics driver. The graphics driver creates a representation of that variant on the GPU, and performs any additional work that the platform requires.</li>
</ol>

<p>The benefit of this behavior is that there is no upfront GPU memory usage or load time for shader variants. The downside is that there can be visible stalls when a variant is used for the first time, because the graphics driver must create the shader program on the GPU and perform any additional work.</p>

<p><a name="prewarming-shader-variants"></a></p>

<h2>Prewarming shader variants</h2>

<p>To avoid visible stalls at performance-intensive times, Unity can ask the graphics driver to create GPU representations of shader variants before they are first needed. This is called <strong>prewarming</strong>.</p>

<p>
<strong>Warning:</strong> Check the notes on graphics API support before choosing how to perform prewarming. On modern graphics APIs such as DX12, Vulkan, and Metal, only the experimental <a href="../ScriptReference/Experimental.Rendering.ShaderWarmup.html">ShaderWarmup</a> API is fully supported, because it lets you specify a vertex format. Using the other methods can result in wasted work and GPU memory, without fixing the stalls.</p>

<p>You can perform prewarming in the following ways: </p>

<ul>
<li>Prewarm a given Shader object or shader variant collection using the experimental <a href="../ScriptReference/Experimental.Rendering.ShaderWarmup.html">ShaderWarmup</a> API. For graphics API support, see note 1.</li>
<li>Prewarm shader variant collections on application start, by adding them to the <a href="class-GraphicsSettings.html#shader-loading">Preloaded shaders section of the Graphics Settings window</a>. For graphics API support, see note 2.</li>
<li>Prewarm a shader variant collection using the <a href="../ScriptReference/ShaderVariantCollection.WarmUp.html">ShaderVariantCollection.WarmUp</a> API. For graphics API support, see note 2.</li>
<li>Prewarm all variants of all Shader objects currently in memory using the <a href="Shader.WarmupAllShaders">Shader.WarmupAllShaders</a> API. For graphics API support, see note 2.</li>
</ul>

<p><strong>Notes:</strong></p>

<ol>
<li>Fully supported on all graphics APIs.</li>
<li>Fully supported on DX11 and OpenGL. Partially supported on DX12, Vulkan, and Metal; the graphics driver might still need to perform work if the vertex layout and/or the render target setup is different from the data used to prewarm it.</li>
</ol>

<h2>Profiler markers for shader loading</h2>

<p>The <span class="tooltip"><strong>profiler</strong><span class="tooltiptext">A window that helps you to optimize your game. It shows how much time is spent in the various areas of your game. For example, it can report the percentage of time spent <strong>rendering</strong>, animating, or in your game logic. <a class="tooltipMoreInfoLink" href="Profiler.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a class="tooltipMoreInfoLink" href="Glossary.html#Profiler">Glossary</a></span></span></span> marker for Unity creating a representation of shader variant data to send to the GPU is <code>Shader.Parse</code>. The <span class="tooltip"><strong>profiler marker</strong><span class="tooltiptext">Placed in code to describe a CPU or GPU event that is then displayed in the Unity Profiler window. Added to Unity code by default, or you can use <a href="https://docs.unity3d.com/Packages/com.unity.profiling.core@latest/index.html?subfolder=/manual/profilermarker-guide.html">ProfilerMarker API</a> to add your own custom markers. <a href="profiler-markers.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Profilermarker">Glossary</a></span></span></span> for uploading the shader program to the GPU, and waiting for the GPU to perform any required work, is <code>CreateGPUProgram</code>.</p>

<p>For information on using the Unity Profiler, see <a href="profiler-profiling-applications.html">Profile your application</a>.</p>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="shader-variant-collections.html"></a></span><div class="tip"> Shader variant collections</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="SL-ShaderReplacement.html"></a></span><div class="tip">Replacing shaders at runtime</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2021 Unity Technologies. Publication Date: 2021-12-17.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
